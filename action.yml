description: Restore compiler build cache

inputs:
  name:
    description: Cache branch name
    required: false
    default: cache

runs:
  using: composite

  steps:
    - shell: bash
      run: |
        if [[ -n $(git show-branch remotes/origin/${{ inputs.name }}) ]]; then
          sleep 0.001

          git merge origin/${{ inputs.name }} --allow-unrelated-histories
          unzip -DD "cache.zip"


          git diff $(<cache.hash) ${{ github.sha }} --name-only > diff.txt
          <diff.txt xargs -d'\n' touch


          printf "\n"
          cat cache.hash
          cat diff.txt

          sleep 0.001
        fi
